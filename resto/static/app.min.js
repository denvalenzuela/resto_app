!function(e){"use strict";angular.module("myApp",["ngRoute"])}(),function(e){"use strict";function t(e,t){t.html5Mode({enabled:!0,requireBase:!1}),e.when("/",{templateUrl:"../pages/map/map-tpl.html",controller:"MapCtrl",controllerAs:"map"}).when("/map",{templateUrl:"../pages/map/map-tpl.html",controller:"MapCtrl",controllerAs:"map"}).when("/restaurant",{templateUrl:"../pages/restaurant/restaurant-tpl.html",controller:"RestaurantCtrl",controllerAs:"restaurant"}).when("/analytics",{templateUrl:"../pages/analytics/analytics-tpl.html",controller:"AnalyticsCtrl",controllerAs:"analytics"})}t.$inject=["$routeProvider","$locationProvider"],e.module("myApp").config(t)}(angular),function(e){"use strict";function t(e){var t="#FFFFFF";(a=(o=document.getElementById("lineChartExample").getContext("2d")).createLinearGradient(500,0,100,0)).addColorStop(0,"#80b6f4"),a.addColorStop(1,t),(r=o.createLinearGradient(0,170,0,50)).addColorStop(0,"rgba(128, 182, 244, 0)"),r.addColorStop(1,"rgba(249, 99, 59, 0.40)");var o,a;new Chart(o,{type:"line",responsive:!0,data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Active Users",borderColor:"#f96332",pointBorderColor:"#FFF",pointBackgroundColor:"#f96332",pointBorderWidth:2,pointHoverRadius:4,pointHoverBorderWidth:1,pointRadius:4,fill:!0,backgroundColor:r,borderWidth:2,data:[542,480,430,550,530,453,380,434,568,610,700,630]}]},options:{maintainAspectRatio:!1,legend:{display:!1},tooltips:{bodySpacing:4,mode:"nearest",intersect:0,position:"nearest",xPadding:10,yPadding:10,caretPadding:10},responsive:1,scales:{yAxes:[{display:0,gridLines:0,ticks:{display:!1},gridLines:{zeroLineColor:"transparent",drawTicks:!1,display:!1,drawBorder:!1}}],xAxes:[{display:0,gridLines:0,ticks:{display:!1},gridLines:{zeroLineColor:"transparent",drawTicks:!1,display:!1,drawBorder:!1}}]},layout:{padding:{left:0,right:0,top:15,bottom:15}}}});(a=(o=document.getElementById("lineChartExampleWithNumbersAndGrid").getContext("2d")).createLinearGradient(500,0,100,0)).addColorStop(0,"#18ce0f"),a.addColorStop(1,t),(r=o.createLinearGradient(0,170,0,50)).addColorStop(0,"rgba(128, 182, 244, 0)"),r.addColorStop(1,hexToRGB("#18ce0f",.4));new Chart(o,{type:"line",responsive:!0,data:{labels:["12pm,","3pm","6pm","9pm","12am","3am","6am","9am"],datasets:[{label:"Email Stats",borderColor:"#18ce0f",pointBorderColor:"#FFF",pointBackgroundColor:"#18ce0f",pointBorderWidth:2,pointHoverRadius:4,pointHoverBorderWidth:1,pointRadius:4,fill:!0,backgroundColor:r,borderWidth:2,data:[40,500,650,700,1200,1250,1300,1900]}]},options:{maintainAspectRatio:!1,legend:{display:!1},tooltips:{bodySpacing:4,mode:"nearest",intersect:0,position:"nearest",xPadding:10,yPadding:10,caretPadding:10},responsive:!0,scales:{yAxes:[{gridLines:0,gridLines:{zeroLineColor:"transparent",drawBorder:!1}}],xAxes:[{display:0,gridLines:0,ticks:{display:!1},gridLines:{zeroLineColor:"transparent",drawTicks:!1,display:!1,drawBorder:!1}}]},layout:{padding:{left:0,right:0,top:15,bottom:15}}}});var r,n=document.getElementById("barChartSimpleGradientsNumbers").getContext("2d");(r=o.createLinearGradient(0,170,0,50)).addColorStop(0,"rgba(128, 182, 244, 0)"),r.addColorStop(1,hexToRGB("#2CA8FF",.6));new Chart(n,{type:"bar",data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:[{label:"Active Countries",backgroundColor:r,borderColor:"#2CA8FF",pointBorderColor:"#FFF",pointBackgroundColor:"#2CA8FF",pointBorderWidth:2,pointHoverRadius:4,pointHoverBorderWidth:1,pointRadius:4,fill:!0,borderWidth:1,data:[80,99,86,96,123,85,100,75,88,90,123,155]}]},options:{maintainAspectRatio:!1,legend:{display:!1},tooltips:{bodySpacing:4,mode:"nearest",intersect:0,position:"nearest",xPadding:10,yPadding:10,caretPadding:10},responsive:1,scales:{yAxes:[{gridLines:0,gridLines:{zeroLineColor:"transparent",drawBorder:!1}}],xAxes:[{display:0,gridLines:0,ticks:{display:!1},gridLines:{zeroLineColor:"transparent",drawTicks:!1,display:!1,drawBorder:!1}}]},layout:{padding:{left:0,right:0,top:15,bottom:15}}}})}t.$inject=["$scope"],e.module("myApp").controller("AnalyticsCtrl",t)}(angular),function(d){"use strict";function e(e,o){var n=this;n.restoInfo={},n.pageToken={prevpage:"",nextpage:"",pageCount:0},n.markers=[],n.postCount=function(r){r.click_count++,navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};n.currLocation=t},function(){handleLocationError(!0,n.infoWindow2,n.map2.getCenter())}):handleLocationError(!1,n.infoWindow2,n.map2.getCenter()),n.directionsDisplay=new google.maps.DirectionsRenderer,n.map2=new google.maps.Map(document.getElementById("map2"),{zoom:16,center:r.geometry.location,mapTypeId:google.maps.MapTypeId.ROADMAP}),n.infoWindow2=new google.maps.InfoWindow;var e=new google.maps.Marker({position:r.geometry.location,map:n.map2});n.infoWindow2.setContent(r.name),n.infoWindow2.open(n.map2,e),n.directionsDisplay.setMap(n.map2);var t={place_id:r.place_id};n.restoInfo={},o.getPopulartimes(t).then(function(e){n.restoInfo=d.copy(r),n.restoInfo.phone=e.data.international_phone_number||"",n.restoInfo.populartimes=e.data.populartimes||[],s.data.datasets=[],s.labels=[];var o=Chart.helpers.color;if(d.forEach(n.restoInfo.populartimes,function(e){var t=0;d.forEach(e.data,function(e){t+=e}),s.data.datasets.push({data:[t],backgroundColor:o("#008000").alpha(.5).rgbString(),borderColor:"#008000",label:e.name}),s.labels.push(e.name)}),a)a.update();else var t=document.getElementById("chartPopularTimes").getContext("2d"),a=new Chart(t,s)})},n.placeInfo=function(e){i.setContent(e.name),i.open(r,e.marker)},n.calcRoute=function(){if(n.currLocation&&n.restoInfo){var e=new google.maps.DirectionsService,t={origin:n.currLocation,destination:n.restoInfo.geometry.location,travelMode:"DRIVING"};e.route(t,function(e,t){"OK"==t&&n.directionsDisplay.setDirections(e)})}},n.nextPage=function(){n.pageToken.pageCount++;var e=n.pageToken.nextpage;1<n.pageToken.pageCount&&""!=n.pageToken.nextpage?n.pageToken.prevpage=n.pageToken.nextpage:n.pageToken.prevpage="";""==e&&(e={});a(e)},n.prevPage=function(){n.pageToken.pageCount--;var e=n.pageToken.prevpage;""==e&&(e={});a(e)},n.changeType=function(){""!=n.cebuResto.keyword&&null!=n.cebuResto.keyword&&(n.pageToken.pageCount=0,a({}))},n.cebuResto={coordinates:{lat:10.3157,lng:123.8854},radius:5e3,type:"restaurant"};var r=new google.maps.Map(document.getElementById("map"),{zoom:12,center:n.cebuResto.coordinates,mapTypeId:google.maps.MapTypeId.ROADMAP}),i=new google.maps.InfoWindow,p=new google.maps.LatLngBounds,s=(new google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:r,center:n.cebuResto.coordinates,radius:n.cebuResto.radius+1e3}),{type:"bar",data:{datasets:[]},labels:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],options:{responsive:!0}}),t=document.getElementById("chartPopularTimes").getContext("2d");new Chart(t,s);function a(e){var t;t=d.equals(e,{})?d.copy(n.cebuResto):{pagetoken:e},o.getNearby(t).then(function(o){var a;n.pageToken.nextpage=o.data.next_page_token||"",d.forEach(n.restaurantDetail,function(e){e.marker.setMap(null)}),n.restaurantDetail=[],d.forEach(o.data.results,function(e){var t;a=new google.maps.Marker({position:e.geometry.location,map:r}),p.extend(a.position),google.maps.event.addListener(a,"click",(t=a,function(){i.setContent(e.name),i.open(r,t)})),e.click_count=0,e.marker=a,e.key=o.data.key}),r.fitBounds(p),n.restaurantDetail=o.data.results})}a({})}e.$inject=["$scope","MapSrvc"],d.module("myApp").controller("MapCtrl",e)}(angular),function(e){"use strict";function t(e){new google.maps.Map(document.getElementById("map"),{zoom:10,center:new google.maps.LatLng(10.3157,123.8854),mapTypeId:google.maps.MapTypeId.ROADMAP})}t.$inject=["$scope"],e.module("myApp").controller("RestaurantCtrl",t)}(angular),function(e){"use strict";function t(t){return{getPlace:function(e){return t.get("/api/place",{params:e})},getNearby:function(e){return t.get("/api/nearby",{params:e})},getPopulartimes:function(e){return t.get("/api/populartimes",{params:e})}}}t.$inject=["$http"],e.module("myApp").factory("MapSrvc",t)}(angular);